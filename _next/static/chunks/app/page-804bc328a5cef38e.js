(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3644:(e,t,s)=>{"use strict";s.d(t,{default:()=>N});var a=s(5155),r=s(2115),l=s(4624),n=s(2085),o=s(2596),i=s(9688);function c(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.QP)((0,o.$)(t))}let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=r.forwardRef((e,t)=>{let{className:s,variant:r,size:n,asChild:o=!1,...i}=e,m=o?l.DX:"button";return(0,a.jsx)(m,{className:c(d({variant:r,size:n,className:s})),ref:t,...i})});m.displayName="Button";let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:c("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});h.displayName="Card",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:c("flex flex-col space-y-1.5 p-6",s),...r})}).displayName="CardHeader",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:c("text-2xl font-semibold leading-none tracking-tight",s),...r})}).displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:c("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:c("p-6 pt-0",s),...r})});u.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:c("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter";var x=s(4355),g=s(9588),p=s(9869),f=s(6767),b=s(8979),v=s(4738),w=s(4416),j=s(7550),y=s(2138);function N(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(0),[n,o]=(0,r.useState)([]),[i,c]=(0,r.useState)(0),[d,N]=(0,r.useState)(null),[C,k]=(0,r.useState)(!1),[S,R]=(0,r.useState)(!1),[D,E]=(0,r.useState)("none"),[P,A]=(0,r.useState)(!1),[M,z]=(0,r.useState)(!1),[F,T]=(0,r.useState)(null),[I,H]=(0,r.useState)(0),[U,O]=(0,r.useState)(null),[V,L]=(0,r.useState)(0),[B,_]=(0,r.useState)({top:0,bottom:0}),[W,q]=(0,r.useState)(!1),[G,Y]=(0,r.useState)(null),[J,Q]=(0,r.useState)(!1),X=(0,r.useRef)(null),Z=(0,r.useRef)(null),$=(0,r.useRef)(null),K=(0,r.useRef)(null),ee=(0,r.useRef)(null),et=(0,r.useRef)(null),es=(0,r.useRef)([]),ea=(0,r.useRef)(null),er=(0,r.useCallback)(async e=>new Promise(t=>{console.log("\uD83D\uDD0D Starting text line detection...");let s=ee.current;if(!s){console.error("\uD83D\uDD0D Canvas not found"),t([]);return}let a=s.getContext("2d");if(!a){console.error("\uD83D\uDD0D Canvas context not found"),t([]);return}s.width=e.naturalWidth,s.height=e.naturalHeight,a.drawImage(e,0,0),console.log("\uD83D\uDD0D Canvas setup: ".concat(s.width,"x").concat(s.height));let r=a.getImageData(0,0,s.width,s.height).data,l=new Uint8Array(s.width*s.height);for(let e=0;e<r.length;e+=4){let t=Math.round(.299*r[e]+.587*r[e+1]+.114*r[e+2]);l[e/4]=t<128?0:255}let n=Array(s.height).fill(0);for(let e=0;e<s.height;e++)for(let t=0;t<s.width;t++)0===l[e*s.width+t]&&n[e]++;let o=[],i=!1,c=0,d=Math.max(3,.01*s.width);console.log("\uD83D\uDD0D Min text density threshold: ".concat(d));for(let e=0;e<n.length;e++){let t=n[e]>d;t&&!i?(i=!0,c=e):!t&&i&&(i=!1,o.push({start:c,end:e}))}i&&o.push({start:c,end:s.height}),console.log("\uD83D\uDD0D Raw text lines detected: ".concat(o.length));let m=[];for(let e=0;e<o.length;e++){let t=o[e];if(t.end-t.start<8)continue;let s=o[e+1];s&&s.start-t.end<15?(m.push({start:t.start,end:s.end}),e++):m.push(t)}let h=m.map((e,t)=>({revealHeight:e.end+10,description:"Step ".concat(t+1)}));console.log("\uD83D\uDD0D Final reveal steps created: ".concat(h.length)),console.log("\uD83D\uDD0D Reveal steps:",h),t(h)}),[]),el=(0,r.useCallback)(e=>new Promise(t=>{let s,a,r,l;let n=document.createElement("canvas"),o=n.getContext("2d");n.width=720,n.height=1280,o.fillStyle="white",o.fillRect(0,0,720,1280);let i=e.width/e.height;i>.5625?(s=720,r=0,l=(1280-(a=720/i))/2):(a=1280,r=(720-(s=1280*i))/2,l=0),o.drawImage(e,r,l,s,a),console.log("\uD83C\uDFA8 Resized image: ".concat(e.width,"x").concat(e.height," → ").concat(720,"x").concat(1280)),console.log("\uD83C\uDFA8 Draw position: ".concat(r.toFixed(1),", ").concat(l.toFixed(1),", ").concat(s.toFixed(1),"x").concat(a.toFixed(1))),t(n.toDataURL("image/jpeg",.95))}),[]),en=(0,r.useCallback)(async e=>new Promise((a,r)=>{let l=new window.Image;l.onload=async()=>{try{let e=l.naturalWidth,n=l.naturalHeight,i=e/n;console.log("\uD83D\uDCF1 Original image: ".concat(e,"x").concat(n,", aspect ratio: ").concat(i.toFixed(2),", portrait: ").concat(n>e));let c=await el(l),d=new window.Image;d.onload=async()=>{let e=d.naturalWidth,r=d.naturalHeight,l=e/r;console.log("\uD83D\uDCF1 Resized image: ".concat(e,"x").concat(r,", aspect ratio: ").concat(l.toFixed(2))),O({width:e,height:r,isPortrait:r>e,aspectRatio:l}),t(e=>{let t=[...e];return t[s]=c,t});let n=await er(d);if(o(n),0===n.length){console.warn("⚠️ No text lines detected in resized image");let e=[{revealHeight:Math.floor(.33*r),description:"Step 1"},{revealHeight:Math.floor(.66*r),description:"Step 2"},{revealHeight:r,description:"Step 3"}];o(e),console.log("\uD83D\uDD27 Created fallback reveal steps:",e.length)}T(null),a()},d.onerror=e=>{console.error("❌ Error loading resized image:",e),r(Error("Failed to process resized image."))},d.src=c}catch(e){console.error("❌ Error in image processing:",e),r(e)}},l.onerror=e=>{console.error("❌ Error loading original image:",e),r(Error("Failed to load image. Please try a different image."))},l.src=e}),[er,el,s]),eo=(0,r.useCallback)(async e=>{let s=e.target.files;if(!s||0===s.length)return;let a=Array.from(s).filter(e=>e.type.startsWith("image/")?!(e.size>0xa00000)||(T('"'.concat(e.name,'" is too large (').concat(Math.round(e.size/1024/1024),"MB). Please upload images smaller than 10MB.")),!1):(T('"'.concat(e.name,'" is not a valid image file. Please upload JPG, PNG, or other image formats.')),!1));if(0===a.length)return;k(!0),T(null);let r=[];try{for(let e of a){let t=await new Promise((t,s)=>{let a=new FileReader;a.onloadend=()=>t(a.result),a.onerror=()=>s(Error("Failed to read file: ".concat(e.name))),a.readAsDataURL(e)});r.push(t)}t(r),l(0),c(0),H(0),await en(r[0]),R(!0)}catch(t){console.error("❌ Error processing files:",t);let e=t instanceof Error?t.message:"Unknown error occurred";T("Processing failed: ".concat(e,". Please try again or use a different image."))}k(!1)},[en]),ei=(0,r.useCallback)(async()=>{console.log("\uD83C\uDFA5 Starting camera process..."),E("loading");try{if(!navigator.mediaDevices)throw console.error("\uD83C\uDFA5 navigator.mediaDevices not available"),Error("Camera not supported on this device/browser");if(!navigator.mediaDevices.getUserMedia)throw console.error("\uD83C\uDFA5 getUserMedia not available"),Error("Camera access not supported on this device/browser");"https:"!==location.protocol&&"localhost"!==location.hostname&&console.error("\uD83C\uDFA5 Not on HTTPS - camera may not work on mobile"),console.log("\uD83C\uDFA5 Requesting camera access..."),console.log("\uD83C\uDFA5 Protocol:",location.protocol),console.log("\uD83C\uDFA5 Hostname:",location.hostname);let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}},audio:!1});console.log("\uD83C\uDFA5 Camera access granted, stream received:",e),N(e),setTimeout(()=>{if(X.current){console.log("\uD83C\uDFA5 Video element found, setting up..."),X.current.srcObject=e;let t=()=>{console.log("\uD83C\uDFA5 Camera marked as ready!"),E("ready")};X.current.onloadedmetadata=()=>{console.log("\uD83C\uDFA5 onloadedmetadata fired"),t()},X.current.oncanplay=()=>{console.log("\uD83C\uDFA5 oncanplay fired"),t()},X.current.onloadstart=()=>console.log("\uD83C\uDFA5 onloadstart fired"),X.current.onloadeddata=()=>console.log("\uD83C\uDFA5 onloadeddata fired"),X.current.oncanplaythrough=()=>console.log("\uD83C\uDFA5 oncanplaythrough fired"),X.current.onplaying=()=>console.log("\uD83C\uDFA5 onplaying fired"),X.current.onerror=e=>console.error("\uD83C\uDFA5 Video error:",e);let s=setTimeout(()=>{console.log("\uD83C\uDFA5 Camera ready via timeout fallback (3s)"),t()},3e3);X.current.addEventListener("loadedmetadata",()=>{console.log("\uD83C\uDFA5 Clearing timeout - metadata loaded"),clearTimeout(s)},{once:!0}),console.log("\uD83C\uDFA5 Calling video.play()...");let a=X.current.play();void 0!==a&&a.then(()=>{console.log("\uD83C\uDFA5 Video play() succeeded")}).catch(e=>{console.error("\uD83C\uDFA5 Video play() failed:",e)}),console.log("\uD83C\uDFA5 Video setup complete, waiting for events...")}else console.error("\uD83C\uDFA5 Video element still not found!"),E("denied")},200)}catch(e){console.error("\uD83C\uDFA5 Error accessing camera:",e),e instanceof Error?console.error("\uD83C\uDFA5 Error details:",{name:e.name,message:e.message,code:e.code||"unknown"}):console.error("\uD83C\uDFA5 Unknown error type:",e),E("denied")}},[]),ec=(0,r.useCallback)(()=>{E("audio-only"),A(!1)},[]),ed=(0,r.useCallback)(async()=>{try{console.log("\uD83C\uDFAC Starting screen recording..."),q(!0),es.current=[];let e=await navigator.mediaDevices.getDisplayMedia({video:{width:{ideal:720},height:{ideal:1280},frameRate:{ideal:30}},audio:!1});ea.current=e,console.log("✅ Screen capture started");let t=null;if(d){let e=d.getAudioTracks();e.length>0&&(t=new MediaStream(e),console.log("✅ Using existing camera microphone"))}t||(t=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),console.log("✅ New microphone access granted"));let s=new MediaStream([...e.getVideoTracks(),...t.getAudioTracks()]),a=new MediaRecorder(s,{mimeType:"video/webm;codecs=vp9"});et.current=a,a.ondataavailable=e=>{e.data.size>0&&(es.current.push(e.data),console.log("\uD83D\uDCE6 Recording chunk received:",e.data.size,"bytes"))},a.onstop=()=>{console.log("\uD83D\uDED1 Recording stopped, creating WebM blob...");let e=new Blob(es.current,{type:"video/webm"});Y(e),q(!1),Q(!0),console.log("✅ WebM blob created:",e.size,"bytes")},a.start(1e3),console.log("\uD83C\uDFAC MediaRecorder started!")}catch(e){console.error("❌ Screen recording failed:",e),q(!1),alert("Screen recording failed. Please make sure you grant screen sharing permission.")}},[d]),em=(0,r.useCallback)(()=>{et.current&&("recording"===et.current.state&&et.current.stop(),et.current=null),ea.current&&(ea.current.getTracks().forEach(e=>e.stop()),ea.current=null),es.current=[],q(!1),console.log("\uD83E\uDDF9 Recording resources cleaned up")},[]),eh=(0,r.useCallback)(()=>{em(),d&&(d.getTracks().forEach(e=>e.stop()),N(null)),E("none"),t([]),l(0),o([]),c(0),R(!1),A(!1),T(null),H(0),O(null),Y(null),Q(!1),K.current&&(K.current.value=""),console.log("\uD83D\uDD04 Complete app reset")},[em,d]),eu=(0,r.useCallback)(()=>{let e=[];return navigator.mediaDevices||e.push("Media devices not supported"),navigator.mediaDevices.getDisplayMedia||e.push("Screen recording not supported"),window.MediaRecorder||e.push("Media recording not supported"),/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)||e.push("Please use Chrome browser for best recording support"),!(e.length>0)||(console.warn("⚠️ Recording compatibility issues:",e),T(e.join(". ")+"."),!1)},[]);(0,r.useEffect)(()=>{M&&eu()},[M,eu]),(0,r.useEffect)(()=>()=>{em()},[em]);let ex=(0,r.useCallback)(()=>{console.log("\uD83D\uDED1 Stopping screen recording..."),et.current&&"recording"===et.current.state&&et.current.stop(),ea.current&&(ea.current.getTracks().forEach(e=>e.stop()),ea.current=null)},[]),eg=(0,r.useCallback)(()=>{A(!1),ei()},[ei]);(0,r.useEffect)(()=>{(async()=>{console.log("\uD83D\uDE80 Initializing Math Fast APP Creator..."),await new Promise(e=>setTimeout(e,1500));try{if(!document.createElement("canvas").getContext("2d"))throw Error("Canvas not supported");console.log("✅ Canvas initialized")}catch(e){console.error("❌ Canvas initialization failed:",e)}try{if(!window.FileReader)throw Error("FileReader not supported");console.log("✅ File reading initialized")}catch(e){console.error("❌ File reading initialization failed:",e)}console.log("\uD83C\uDF89 App initialization complete!"),z(!0)})()},[]),(0,r.useEffect)(()=>{"ready"===D&&d&&Z.current&&(console.log("\uD83C\uDFA5 Attaching stream to visible video element"),Z.current.srcObject=d,Z.current.play().catch(console.error))},[D,d]);let ep=(0,r.useCallback)(()=>{d&&(d.getTracks().forEach(e=>e.stop()),N(null)),E("none")},[d]),ef=(0,r.useCallback)(()=>{R(!0)},[]),eb=(0,r.useCallback)(()=>{R(!1),A(!0)},[]),ev=(0,r.useCallback)(async()=>{if(i<n.length)c(e=>e+1);else if(s<e.length-1){let t=s+1;l(t),c(0),k(!0);try{await en(e[t]),c(1)}catch(e){console.error("Error processing next image:",e),alert("Error processing next image. Please try again.")}k(!1)}},[i,n.length,s,e,en]),ew=(0,r.useCallback)(async()=>{if(i>1)c(e=>e-1);else if(s>0){let t=s-1;l(t),k(!0);try{let s;await en(e[t]);let a=await er(await (s=e[t],new Promise((e,t)=>{let a=new window.Image;a.onload=()=>e(a),a.onerror=t,a.src=s})));c(a.length)}catch(e){console.error("Error processing previous image:",e),alert("Error processing previous image. Please try again.")}k(!1)}},[i,s,e,en,er]),ej=(0,r.useCallback)(()=>{t([]),l(0),o([]),c(0),R(!1),E("none"),A(!1),T(null),H(0),ep(),O(null),K.current&&(K.current.value="")},[ep]),ey=(0,r.useCallback)(()=>{H(e=>e+1),T(null),e.length>0&&(k(!0),en(e[s]).then(()=>{k(!1),0===i&&R(!0)}).catch(e=>{k(!1);let t=e instanceof Error?e.message:"Unknown error occurred";T("Retry failed: ".concat(t,". Please try a different image."))}))},[e,s,en,i]),eN=()=>{if(!U||0===n.length||0===i)return 0;if(i>n.length)return U.height;let e=n[i-1].revealHeight;return console.log("\uD83C\uDFAF Reveal step ".concat(i,": Height=").concat(e,"px")),e},eC=e[s]||null;if((0,r.useEffect)(()=>{let e=document.querySelector("meta[name=viewport]");if(e)e.setAttribute("content","width=device-width, initial-scale=1.0, user-scalable=no");else{let e=document.createElement("meta");e.name="viewport",e.content="width=device-width, initial-scale=1.0, user-scalable=no",document.getElementsByTagName("head")[0].appendChild(e)}return document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",()=>{document.body.style.overflow="",document.documentElement.style.overflow=""}},[]),(0,r.useEffect)(()=>{let e=()=>{let e=window.innerHeight;L(e);let t=document.createElement("div");t.style.position="fixed",t.style.top="env(safe-area-inset-top)",t.style.bottom="env(safe-area-inset-bottom)",t.style.visibility="hidden",document.body.appendChild(t);let s=getComputedStyle(t),a=parseInt(s.top)||0,r=parseInt(s.bottom)||0;_({top:a,bottom:r}),document.body.removeChild(t),console.log("\uD83D\uDCF1 Viewport updated:",{vh:e,topSafe:a,bottomSafe:r})};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[]),(0,r.useEffect)(()=>{let e=document.createElement("style");return e.textContent="\n      :root {\n        --safe-area-inset-top: env(safe-area-inset-top, 0px);\n        --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);\n      }\n      * {\n        -webkit-overflow-scrolling: touch;\n      }\n    ",document.head.appendChild(e),()=>{document.head.contains(e)&&document.head.removeChild(e)}},[]),!M)return(0,a.jsx)("div",{className:"flex flex-col items-center justify-center h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 overflow-hidden",children:(0,a.jsx)(h,{className:"w-full max-w-md",children:(0,a.jsxs)(u,{className:"p-8 text-center",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(x.A,{className:"h-8 w-8 text-white"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Math Fast APP"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Preparing AI for content creation"})]}),(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 border-2 border-purple-600 border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{className:"text-sm text-slate-700",children:"Loading image processing..."})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin",style:{animationDelay:"0.3s"}}),(0,a.jsx)("span",{className:"text-sm text-slate-700",children:"Initializing text detection..."})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 border-2 border-green-600 border-t-transparent rounded-full animate-spin",style:{animationDelay:"0.6s"}}),(0,a.jsx)("span",{className:"text-sm text-slate-700",children:"Setting up camera support..."})]})]}),(0,a.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-2 mb-4",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 h-2 rounded-full animate-pulse",style:{width:"75%"}})}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Please wait while we prepare everything for the best experience"})]})})});if(P)return(0,a.jsx)("div",{className:"flex flex-col items-center justify-center h-screen bg-slate-50 p-4 overflow-hidden",children:(0,a.jsx)(h,{className:"w-full max-w-md",children:(0,a.jsxs)(u,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-center mb-6 text-slate-900",children:"Choose Recording Mode"}),(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,a.jsxs)(m,{onClick:eg,className:"w-full py-4 text-lg bg-purple-600 hover:bg-purple-700 text-white rounded-lg flex items-center justify-center space-x-3",children:[(0,a.jsx)(x.A,{className:"h-6 w-6"}),(0,a.jsx)("span",{children:"Camera + Voice"})]}),(0,a.jsxs)(m,{onClick:ec,variant:"outline",className:"w-full py-4 text-lg border-2 border-slate-300 hover:bg-slate-50 rounded-lg flex items-center justify-center space-x-3",children:[(0,a.jsx)(g.A,{className:"h-6 w-6"}),(0,a.jsx)("span",{children:"Voice Only"})]})]}),(0,a.jsx)("p",{className:"text-sm text-slate-600 text-center",children:"Choose camera + voice to show your face, or voice only for audio explanation"})]})})});if("requesting"===D)return(0,a.jsx)("div",{className:"flex flex-col items-center justify-center h-screen bg-slate-50 p-4 overflow-hidden",children:(0,a.jsx)(h,{className:"w-full max-w-md",children:(0,a.jsxs)(u,{className:"p-6 text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-slate-900",children:"Requesting Camera Access"}),(0,a.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-purple-600 border-t-transparent rounded-full mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Please allow camera access when prompted"})]})})});if("loading"===D)return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen bg-slate-50 p-4 overflow-hidden",children:[(0,a.jsx)("video",{ref:X,autoPlay:!0,playsInline:!0,muted:!0,style:{display:"none"}}),(0,a.jsx)(h,{className:"w-full max-w-md",children:(0,a.jsxs)(u,{className:"p-6 text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-slate-900",children:"Starting Camera"}),(0,a.jsx)("div",{className:"animate-pulse h-8 w-8 bg-purple-600 rounded-full mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-600 mb-4",children:"Camera is starting up..."}),(0,a.jsx)(m,{onClick:()=>{console.log("\uD83C\uDFA5 Emergency skip - forcing ready state"),E("ready")},variant:"outline",className:"mt-4 text-sm",children:"Skip (if stuck)"})]})})]});if("denied"===D){let e="https:"===location.protocol||"localhost"===location.hostname,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return(0,a.jsx)("div",{className:"flex flex-col items-center justify-center h-screen bg-slate-50 p-4 overflow-hidden",children:(0,a.jsx)(h,{className:"w-full max-w-md",children:(0,a.jsxs)(u,{className:"p-6 text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-slate-900",children:"Camera Access Issue"}),!e&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-red-800",children:[(0,a.jsx)("strong",{children:"Security Issue:"})," Camera requires HTTPS on mobile devices. This site is using HTTP which blocks camera access."]})}),t&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,a.jsx)("strong",{children:"Mobile Tips:"}),(0,a.jsx)("br",{}),"• Make sure camera permission is enabled",(0,a.jsx)("br",{}),"• Try refreshing the page",(0,a.jsx)("br",{}),"• Check if other apps are using the camera",(0,a.jsx)("br",{}),!e&&"• Use HTTPS version of this site"]})}),(0,a.jsx)("p",{className:"text-slate-600 mb-6",children:"You can still record with voice only"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(m,{onClick:ec,className:"w-full py-3 bg-green-600 hover:bg-green-700 text-white",children:[(0,a.jsx)(g.A,{className:"mr-2 h-5 w-5"}),"Continue with Voice Only"]}),(0,a.jsx)(m,{onClick:()=>A(!0),variant:"outline",className:"w-full py-2",children:"Try Camera Again"})]})]})})})}if(S)return(0,a.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-50 p-4",children:(0,a.jsx)(h,{className:"w-full max-w-md",children:(0,a.jsxs)(u,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-center mb-6 text-slate-900",children:"Ready to Record!"}),(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold",children:"1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-blue-900",children:"Start Screen Recording"}),(0,a.jsx)("p",{className:"text-sm text-blue-700",children:"Open Control Center → Screen Recording"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-green-600 text-white rounded-full flex items-center justify-center font-bold",children:"2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-green-900",children:"Come Back to This App"}),(0,a.jsx)("p",{className:"text-sm text-green-700",children:"Switch back when recording starts"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-purple-50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold",children:"3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-purple-900",children:'Click "I\'m Ready"'}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"Start revealing your math problem"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(m,{onClick:eb,className:"w-full py-3 text-lg bg-purple-600 hover:bg-purple-700 text-white",children:"I'm Ready - Start Revealing!"}),(0,a.jsx)(m,{onClick:()=>R(!1),variant:"outline",className:"w-full py-2",children:"Cancel"})]})]})})});if(J&&G){let e=URL.createObjectURL(G);return(0,a.jsx)("div",{className:"min-h-screen bg-slate-50 flex flex-col items-center justify-center p-4",children:(0,a.jsx)(h,{className:"w-full max-w-md",children:(0,a.jsxs)(u,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-center mb-4 text-slate-900",children:"Recording Complete! \uD83C\uDF89"}),(0,a.jsx)("div",{className:"bg-black rounded-lg overflow-hidden mb-4",children:(0,a.jsxs)("video",{controls:!0,autoPlay:!0,className:"w-full h-auto",style:{maxHeight:"400px"},children:[(0,a.jsx)("source",{src:e,type:"video/webm"}),"Your browser does not support video playback."]})}),(0,a.jsxs)("div",{className:"text-center mb-4",children:[(0,a.jsxs)("p",{className:"text-sm text-slate-600",children:["Size: ",(G.size/1048576).toFixed(2)," MB"]}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"Format: WebM (Ready for YouTube Shorts)"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(m,{onClick:()=>{let t=document.createElement("a");t.href=e,t.download="math-explanation-".concat(Date.now(),".webm"),document.body.appendChild(t),t.click(),document.body.removeChild(t)},className:"w-full py-3 bg-green-600 hover:bg-green-700 text-white",children:[(0,a.jsx)(p.A,{className:"mr-2 h-5 w-5"}),"Download Video"]}),(0,a.jsx)(m,{onClick:()=>{Q(!1),Y(null),c(0),URL.revokeObjectURL(e)},variant:"outline",className:"w-full py-2",children:"Record Another"}),(0,a.jsx)(m,{onClick:eh,variant:"ghost",className:"w-full py-2 text-slate-600",children:"Start Over with New Image"})]})]})})})}return(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,a.jsx)("canvas",{ref:ee,style:{display:"none"}}),0===e.length&&(0,a.jsx)("div",{className:"flex flex-col items-center justify-center h-screen p-4 overflow-hidden",children:(0,a.jsx)(h,{className:"w-full max-w-md",children:(0,a.jsxs)(u,{className:"p-6 text-center",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(p.A,{className:"h-8 w-8 text-white"})}),(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2 text-slate-800",children:"Math Fast APP"}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"For best YouTube Shorts results, use portrait images (9:16 ratio)"})]}),F&&(0,a.jsxs)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-red-800 mb-3",children:F}),(0,a.jsxs)("div",{className:"flex gap-2 justify-center",children:[I<3&&(0,a.jsxs)(m,{onClick:ey,variant:"outline",size:"sm",className:"border-red-300 text-red-700 hover:bg-red-50",children:["Try Again (",3-I," left)"]}),(0,a.jsx)(m,{onClick:()=>T(null),variant:"outline",size:"sm",children:"Dismiss"})]})]}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:eo,className:"hidden",id:"image-upload",ref:K,multiple:!0}),(0,a.jsx)(m,{onClick:()=>{var e;return null===(e=K.current)||void 0===e?void 0:e.click()},disabled:C,className:"w-full py-3 text-lg bg-purple-600 hover:bg-purple-700 text-white",children:C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full mr-2"}),"Processing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.A,{className:"mr-2 h-5 w-5"}),"Upload Images"]})}),(0,a.jsxs)("div",{className:"mt-4 flex justify-center space-x-4 text-xs text-slate-500",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(f.A,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)("span",{children:"Portrait: Best"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(b.A,{className:"h-4 w-4 text-yellow-600"}),(0,a.jsx)("span",{children:"Square: Good"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 text-red-600"}),(0,a.jsx)("span",{children:"Landscape: Poor"})]})]})]})})}),eC&&(0,a.jsxs)("div",{className:"flex flex-col overflow-hidden bg-slate-50",style:{height:V||"100vh",paddingTop:"".concat(B.top,"px"),paddingBottom:"".concat(B.bottom,"px")},children:[(0,a.jsxs)("div",{className:"flex-shrink-0 py-2 px-4 text-center bg-white shadow-sm relative",style:{height:"".concat(Math.max(48,12+B.top),"px")},children:[(0,a.jsx)("h1",{className:"text-lg font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Math Fast APP"}),(0,a.jsx)(m,{onClick:ej,variant:"ghost",size:"icon",className:"absolute top-1 right-2 h-8 w-8 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 z-50",children:(0,a.jsx)(w.A,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"flex items-center justify-center px-3 py-1",style:{height:"".concat(V-Math.max(48,12+B.top)-Math.max(72,20+B.bottom),"px")},children:(0,a.jsx)("div",{className:"relative w-full max-w-sm mx-auto h-full",children:(0,a.jsxs)("div",{className:"relative w-full bg-white rounded-xl overflow-hidden shadow-lg h-full",style:{maxHeight:"100%",minHeight:"".concat(Math.min(400,.5*(V||800)),"px")},children:[(0,a.jsx)("img",{src:eC,alt:"Math problem",className:"absolute inset-0 w-full h-full object-contain bg-white",ref:$,style:{transform:"translateZ(0)",backfaceVisibility:"hidden"}}),C&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 text-white z-20",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin h-6 w-6 border-2 border-white border-t-transparent rounded-full mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm",children:"Analyzing..."})]})}),F&&!C&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-red-900/80 text-white z-20",children:(0,a.jsxs)("div",{className:"text-center p-4",children:[(0,a.jsx)("p",{className:"font-semibold mb-3 text-sm",children:"Processing Failed"}),(0,a.jsxs)("div",{className:"flex gap-2 justify-center",children:[I<3&&(0,a.jsx)(m,{onClick:ey,size:"sm",className:"bg-white text-red-900 hover:bg-gray-100 text-xs",children:"Retry"}),(0,a.jsx)(m,{onClick:ej,variant:"outline",size:"sm",className:"border-white text-white hover:bg-white hover:text-red-900 text-xs",children:"Start Over"})]})]})}),U&&(0,a.jsx)("div",{className:"absolute inset-0 z-10 pointer-events-none",children:(0,a.jsx)("div",{className:"absolute bg-white transition-all duration-700 ease-in-out",style:{left:0,top:"".concat(eN()/U.height*100,"%"),width:"100%",height:"".concat(100-eN()/U.height*100,"%")}})})]})})}),"ready"===D&&d&&(0,a.jsxs)("div",{className:"absolute top-14 right-4 w-16 h-16 bg-black rounded-full overflow-hidden border-2 border-white shadow-lg z-30",children:[(0,a.jsx)("video",{ref:Z,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover transform scale-x-[-1]"}),(0,a.jsx)(m,{variant:"ghost",size:"icon",onClick:ep,className:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-red-500 text-white hover:bg-red-600 p-0",children:(0,a.jsx)(w.A,{className:"h-3 w-3"})})]}),"audio-only"===D&&(0,a.jsx)("div",{className:"absolute top-14 right-4 w-12 h-12 bg-green-600 rounded-full flex items-center justify-center border-2 border-white shadow-lg z-30",children:(0,a.jsx)(g.A,{className:"h-4 w-4 text-white"})}),(0,a.jsx)("div",{className:"flex-shrink-0 bg-white border-t border-slate-200 py-2",style:{height:"".concat(Math.max(72,20+B.bottom),"px")},children:(0,a.jsxs)("div",{className:"flex items-center justify-center h-full px-4",children:[0===i&&n.length>0&&!C&&"none"===D&&(0,a.jsxs)(m,{onClick:ef,className:"bg-purple-600 hover:bg-purple-700 text-white shadow-lg px-4 py-2",children:[(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Start Recording"]}),("ready"===D||"audio-only"===D)&&0===i&&!W&&(0,a.jsxs)(m,{onClick:ed,className:"bg-green-600 hover:bg-green-700 text-white shadow-lg px-4 py-2",children:[(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Start Recording"]}),W&&0===i&&(0,a.jsxs)(m,{onClick:ex,className:"bg-red-600 hover:bg-red-700 text-white shadow-lg px-4 py-2 animate-pulse",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-white rounded-full mr-2 animate-ping"}),"Stop Recording"]}),W&&0===i&&(0,a.jsx)(m,{onClick:()=>c(1),className:"bg-purple-600 hover:bg-purple-700 text-white shadow-lg px-4 py-2 ml-3",children:"Start Explaining"}),i>0&&("ready"===D||"audio-only"===D)&&(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(m,{onClick:ew,disabled:i<=1&&s<=0,variant:"outline",className:"bg-white hover:bg-slate-50 shadow-lg border-slate-300 px-3 py-2",children:(0,a.jsx)(j.A,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"px-3 py-2 rounded-lg text-sm font-medium min-w-[50px] text-center ".concat(W?"bg-red-100 text-red-800 border border-red-300":"bg-slate-100 text-slate-700"),children:[W&&(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{children:"REC"})]}),!W&&"".concat(i,"/").concat(n.length)]}),(0,a.jsx)(m,{onClick:ev,disabled:i>=n.length&&s>=e.length-1,variant:"outline",className:"bg-white hover:bg-slate-50 shadow-lg border-slate-300 px-3 py-2",children:(0,a.jsx)(y.A,{className:"h-4 w-4"})}),W&&(0,a.jsx)(m,{onClick:ex,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-2 ml-2",children:(0,a.jsx)(b.A,{className:"h-4 w-4"})})]})]})})]})]})}},9044:(e,t,s)=>{Promise.resolve().then(s.bind(s,3644))}},e=>{var t=t=>e(e.s=t);e.O(0,[591,441,684,358],()=>t(9044)),_N_E=e.O()}]);