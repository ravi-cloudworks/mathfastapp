(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3644:(e,t,s)=>{"use strict";s.d(t,{default:()=>N});var a=s(5155),l=s(2115),r=s(4624),n=s(2085),o=s(2596),i=s(9688);function c(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.QP)((0,o.$)(t))}let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=l.forwardRef((e,t)=>{let{className:s,variant:l,size:n,asChild:o=!1,...i}=e,m=o?r.DX:"button";return(0,a.jsx)(m,{className:c(d({variant:l,size:n,className:s})),ref:t,...i})});m.displayName="Button";let h=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:c("rounded-lg border bg-card text-card-foreground shadow-sm",s),...l})});h.displayName="Card",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:c("flex flex-col space-y-1.5 p-6",s),...l})}).displayName="CardHeader",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:c("text-2xl font-semibold leading-none tracking-tight",s),...l})}).displayName="CardTitle",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:c("text-sm text-muted-foreground",s),...l})}).displayName="CardDescription";let u=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:c("p-6 pt-0",s),...l})});u.displayName="CardContent",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:t,className:c("flex items-center p-6 pt-0",s),...l})}).displayName="CardFooter";var x=s(4355),g=s(9588),p=s(9869),f=s(6767),b=s(8979),v=s(4738),w=s(4416),j=s(7550),y=s(2138);function N(){let[e,t]=(0,l.useState)([]),[s,r]=(0,l.useState)(0),[n,o]=(0,l.useState)([]),[i,c]=(0,l.useState)(0),[d,N]=(0,l.useState)(null),[C,k]=(0,l.useState)(!1),[D,E]=(0,l.useState)(!1),[P,S]=(0,l.useState)("none"),[A,R]=(0,l.useState)(!1),[z,F]=(0,l.useState)(!1),[M,T]=(0,l.useState)(null),[I,H]=(0,l.useState)(0),[V,O]=(0,l.useState)(null),[U,B]=(0,l.useState)(0),[L,_]=(0,l.useState)({top:0,bottom:0}),q=(0,l.useRef)(null),W=(0,l.useRef)(null),G=(0,l.useRef)(null),Y=(0,l.useRef)(null),J=(0,l.useRef)(null),Q=(0,l.useCallback)(async e=>new Promise(t=>{console.log("\uD83D\uDD0D Starting text line detection...");let s=J.current;if(!s){console.error("\uD83D\uDD0D Canvas not found"),t([]);return}let a=s.getContext("2d");if(!a){console.error("\uD83D\uDD0D Canvas context not found"),t([]);return}s.width=e.naturalWidth,s.height=e.naturalHeight,a.drawImage(e,0,0),console.log("\uD83D\uDD0D Canvas setup: ".concat(s.width,"x").concat(s.height));let l=a.getImageData(0,0,s.width,s.height).data,r=new Uint8Array(s.width*s.height);for(let e=0;e<l.length;e+=4){let t=Math.round(.299*l[e]+.587*l[e+1]+.114*l[e+2]);r[e/4]=t<128?0:255}let n=Array(s.height).fill(0);for(let e=0;e<s.height;e++)for(let t=0;t<s.width;t++)0===r[e*s.width+t]&&n[e]++;let o=[],i=!1,c=0,d=Math.max(3,.01*s.width);console.log("\uD83D\uDD0D Min text density threshold: ".concat(d));for(let e=0;e<n.length;e++){let t=n[e]>d;t&&!i?(i=!0,c=e):!t&&i&&(i=!1,o.push({start:c,end:e}))}i&&o.push({start:c,end:s.height}),console.log("\uD83D\uDD0D Raw text lines detected: ".concat(o.length));let m=[];for(let e=0;e<o.length;e++){let t=o[e];if(t.end-t.start<8)continue;let s=o[e+1];s&&s.start-t.end<15?(m.push({start:t.start,end:s.end}),e++):m.push(t)}let h=m.map((e,t)=>({revealHeight:e.end+10,description:"Step ".concat(t+1)}));console.log("\uD83D\uDD0D Final reveal steps created: ".concat(h.length)),console.log("\uD83D\uDD0D Reveal steps:",h),t(h)}),[]),X=(0,l.useCallback)(e=>new Promise(t=>{let s,a,l,r;let n=document.createElement("canvas"),o=n.getContext("2d");n.width=720,n.height=1280,o.fillStyle="white",o.fillRect(0,0,720,1280);let i=e.width/e.height;i>.5625?(s=720,l=0,r=(1280-(a=720/i))/2):(a=1280,l=(720-(s=1280*i))/2,r=0),o.drawImage(e,l,r,s,a),console.log("\uD83C\uDFA8 Resized image: ".concat(e.width,"x").concat(e.height," → ").concat(720,"x").concat(1280)),console.log("\uD83C\uDFA8 Draw position: ".concat(l.toFixed(1),", ").concat(r.toFixed(1),", ").concat(s.toFixed(1),"x").concat(a.toFixed(1))),t(n.toDataURL("image/jpeg",.95))}),[]),Z=(0,l.useCallback)(async e=>new Promise((a,l)=>{let r=new window.Image;r.onload=async()=>{try{let e=r.naturalWidth,n=r.naturalHeight,i=e/n;console.log("\uD83D\uDCF1 Original image: ".concat(e,"x").concat(n,", aspect ratio: ").concat(i.toFixed(2),", portrait: ").concat(n>e));let c=await X(r),d=new window.Image;d.onload=async()=>{let e=d.naturalWidth,l=d.naturalHeight,r=e/l;console.log("\uD83D\uDCF1 Resized image: ".concat(e,"x").concat(l,", aspect ratio: ").concat(r.toFixed(2))),O({width:e,height:l,isPortrait:l>e,aspectRatio:r}),t(e=>{let t=[...e];return t[s]=c,t});let n=await Q(d);if(o(n),0===n.length){console.warn("⚠️ No text lines detected in resized image");let e=[{revealHeight:Math.floor(.33*l),description:"Step 1"},{revealHeight:Math.floor(.66*l),description:"Step 2"},{revealHeight:l,description:"Step 3"}];o(e),console.log("\uD83D\uDD27 Created fallback reveal steps:",e.length)}T(null),a()},d.onerror=e=>{console.error("❌ Error loading resized image:",e),l(Error("Failed to process resized image."))},d.src=c}catch(e){console.error("❌ Error in image processing:",e),l(e)}},r.onerror=e=>{console.error("❌ Error loading original image:",e),l(Error("Failed to load image. Please try a different image."))},r.src=e}),[Q,X,s]),$=(0,l.useCallback)(async e=>{let s=e.target.files;if(!s||0===s.length)return;let a=Array.from(s).filter(e=>e.type.startsWith("image/")?!(e.size>0xa00000)||(T('"'.concat(e.name,'" is too large (').concat(Math.round(e.size/1024/1024),"MB). Please upload images smaller than 10MB.")),!1):(T('"'.concat(e.name,'" is not a valid image file. Please upload JPG, PNG, or other image formats.')),!1));if(0===a.length)return;k(!0),T(null);let l=[];try{for(let e of a){let t=await new Promise((t,s)=>{let a=new FileReader;a.onloadend=()=>t(a.result),a.onerror=()=>s(Error("Failed to read file: ".concat(e.name))),a.readAsDataURL(e)});l.push(t)}t(l),r(0),c(0),H(0),await Z(l[0]),E(!0)}catch(t){console.error("❌ Error processing files:",t);let e=t instanceof Error?t.message:"Unknown error occurred";T("Processing failed: ".concat(e,". Please try again or use a different image."))}k(!1)},[Z]),K=(0,l.useCallback)(async()=>{console.log("\uD83C\uDFA5 Starting camera process..."),S("loading");try{if(!navigator.mediaDevices)throw console.error("\uD83C\uDFA5 navigator.mediaDevices not available"),Error("Camera not supported on this device/browser");if(!navigator.mediaDevices.getUserMedia)throw console.error("\uD83C\uDFA5 getUserMedia not available"),Error("Camera access not supported on this device/browser");"https:"!==location.protocol&&"localhost"!==location.hostname&&console.error("\uD83C\uDFA5 Not on HTTPS - camera may not work on mobile"),console.log("\uD83C\uDFA5 Requesting camera access..."),console.log("\uD83C\uDFA5 Protocol:",location.protocol),console.log("\uD83C\uDFA5 Hostname:",location.hostname);let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}},audio:!1});console.log("\uD83C\uDFA5 Camera access granted, stream received:",e),N(e),setTimeout(()=>{if(q.current){console.log("\uD83C\uDFA5 Video element found, setting up..."),q.current.srcObject=e;let t=()=>{console.log("\uD83C\uDFA5 Camera marked as ready!"),S("ready")};q.current.onloadedmetadata=()=>{console.log("\uD83C\uDFA5 onloadedmetadata fired"),t()},q.current.oncanplay=()=>{console.log("\uD83C\uDFA5 oncanplay fired"),t()},q.current.onloadstart=()=>console.log("\uD83C\uDFA5 onloadstart fired"),q.current.onloadeddata=()=>console.log("\uD83C\uDFA5 onloadeddata fired"),q.current.oncanplaythrough=()=>console.log("\uD83C\uDFA5 oncanplaythrough fired"),q.current.onplaying=()=>console.log("\uD83C\uDFA5 onplaying fired"),q.current.onerror=e=>console.error("\uD83C\uDFA5 Video error:",e);let s=setTimeout(()=>{console.log("\uD83C\uDFA5 Camera ready via timeout fallback (3s)"),t()},3e3);q.current.addEventListener("loadedmetadata",()=>{console.log("\uD83C\uDFA5 Clearing timeout - metadata loaded"),clearTimeout(s)},{once:!0}),console.log("\uD83C\uDFA5 Calling video.play()...");let a=q.current.play();void 0!==a&&a.then(()=>{console.log("\uD83C\uDFA5 Video play() succeeded")}).catch(e=>{console.error("\uD83C\uDFA5 Video play() failed:",e)}),console.log("\uD83C\uDFA5 Video setup complete, waiting for events...")}else console.error("\uD83C\uDFA5 Video element still not found!"),S("denied")},200)}catch(e){console.error("\uD83C\uDFA5 Error accessing camera:",e),e instanceof Error?console.error("\uD83C\uDFA5 Error details:",{name:e.name,message:e.message,code:e.code||"unknown"}):console.error("\uD83C\uDFA5 Unknown error type:",e),S("denied")}},[]),ee=(0,l.useCallback)(()=>{S("audio-only"),R(!1)},[]),et=(0,l.useCallback)(()=>{R(!1),K()},[K]);(0,l.useEffect)(()=>{(async()=>{console.log("\uD83D\uDE80 Initializing Math Fast APP Creator..."),await new Promise(e=>setTimeout(e,1500));try{if(!document.createElement("canvas").getContext("2d"))throw Error("Canvas not supported");console.log("✅ Canvas initialized")}catch(e){console.error("❌ Canvas initialization failed:",e)}try{if(!window.FileReader)throw Error("FileReader not supported");console.log("✅ File reading initialized")}catch(e){console.error("❌ File reading initialization failed:",e)}console.log("\uD83C\uDF89 App initialization complete!"),F(!0)})()},[]),(0,l.useEffect)(()=>{"ready"===P&&d&&W.current&&(console.log("\uD83C\uDFA5 Attaching stream to visible video element"),W.current.srcObject=d,W.current.play().catch(console.error))},[P,d]);let es=(0,l.useCallback)(()=>{d&&(d.getTracks().forEach(e=>e.stop()),N(null)),S("none")},[d]),ea=(0,l.useCallback)(()=>{E(!0)},[]),el=(0,l.useCallback)(()=>{E(!1),R(!0)},[]),er=(0,l.useCallback)(async()=>{if(i<n.length)c(e=>e+1);else if(s<e.length-1){let t=s+1;r(t),c(0),k(!0);try{await Z(e[t]),c(1)}catch(e){console.error("Error processing next image:",e),alert("Error processing next image. Please try again.")}k(!1)}},[i,n.length,s,e,Z]),en=(0,l.useCallback)(async()=>{if(i>1)c(e=>e-1);else if(s>0){let t=s-1;r(t),k(!0);try{let s;await Z(e[t]);let a=await Q(await (s=e[t],new Promise((e,t)=>{let a=new window.Image;a.onload=()=>e(a),a.onerror=t,a.src=s})));c(a.length)}catch(e){console.error("Error processing previous image:",e),alert("Error processing previous image. Please try again.")}k(!1)}},[i,s,e,Z,Q]),eo=(0,l.useCallback)(()=>{t([]),r(0),o([]),c(0),E(!1),S("none"),R(!1),T(null),H(0),es(),O(null),Y.current&&(Y.current.value="")},[es]),ei=(0,l.useCallback)(()=>{H(e=>e+1),T(null),e.length>0&&(k(!0),Z(e[s]).then(()=>{k(!1),0===i&&E(!0)}).catch(e=>{k(!1);let t=e instanceof Error?e.message:"Unknown error occurred";T("Retry failed: ".concat(t,". Please try a different image."))}))},[e,s,Z,i]),ec=()=>{if(!V||0===n.length||0===i)return 0;if(i>n.length)return V.height;let e=n[i-1].revealHeight;return console.log("\uD83C\uDFAF Reveal step ".concat(i,": Height=").concat(e,"px")),e},ed=e[s]||null;if((0,l.useEffect)(()=>{let e=document.querySelector("meta[name=viewport]");if(e)e.setAttribute("content","width=device-width, initial-scale=1.0, user-scalable=no");else{let e=document.createElement("meta");e.name="viewport",e.content="width=device-width, initial-scale=1.0, user-scalable=no",document.getElementsByTagName("head")[0].appendChild(e)}return document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",()=>{document.body.style.overflow="",document.documentElement.style.overflow=""}},[]),(0,l.useEffect)(()=>{let e=()=>{let e=window.innerHeight;B(e);let t=document.createElement("div");t.style.position="fixed",t.style.top="env(safe-area-inset-top)",t.style.bottom="env(safe-area-inset-bottom)",t.style.visibility="hidden",document.body.appendChild(t);let s=getComputedStyle(t),a=parseInt(s.top)||0,l=parseInt(s.bottom)||0;_({top:a,bottom:l}),document.body.removeChild(t),console.log("\uD83D\uDCF1 Viewport updated:",{vh:e,topSafe:a,bottomSafe:l})};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[]),(0,l.useEffect)(()=>{let e=document.createElement("style");return e.textContent="\n      :root {\n        --safe-area-inset-top: env(safe-area-inset-top, 0px);\n        --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);\n      }\n      * {\n        -webkit-overflow-scrolling: touch;\n      }\n    ",document.head.appendChild(e),()=>{document.head.contains(e)&&document.head.removeChild(e)}},[]),!z)return(0,a.jsx)("div",{className:"flex flex-col items-center justify-center h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4 overflow-hidden",children:(0,a.jsx)(h,{className:"w-full max-w-md",children:(0,a.jsxs)(u,{className:"p-8 text-center",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(x.A,{className:"h-8 w-8 text-white"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Math Fast APP"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Preparing AI for content creation"})]}),(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 border-2 border-purple-600 border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{className:"text-sm text-slate-700",children:"Loading image processing..."})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin",style:{animationDelay:"0.3s"}}),(0,a.jsx)("span",{className:"text-sm text-slate-700",children:"Initializing text detection..."})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 border-2 border-green-600 border-t-transparent rounded-full animate-spin",style:{animationDelay:"0.6s"}}),(0,a.jsx)("span",{className:"text-sm text-slate-700",children:"Setting up camera support..."})]})]}),(0,a.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-2 mb-4",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 h-2 rounded-full animate-pulse",style:{width:"75%"}})}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Please wait while we prepare everything for the best experience"})]})})});if(A)return(0,a.jsx)("div",{className:"flex flex-col items-center justify-center h-screen bg-slate-50 p-4 overflow-hidden",children:(0,a.jsx)(h,{className:"w-full max-w-md",children:(0,a.jsxs)(u,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-center mb-6 text-slate-900",children:"Choose Recording Mode"}),(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,a.jsxs)(m,{onClick:et,className:"w-full py-4 text-lg bg-purple-600 hover:bg-purple-700 text-white rounded-lg flex items-center justify-center space-x-3",children:[(0,a.jsx)(x.A,{className:"h-6 w-6"}),(0,a.jsx)("span",{children:"Camera + Voice"})]}),(0,a.jsxs)(m,{onClick:ee,variant:"outline",className:"w-full py-4 text-lg border-2 border-slate-300 hover:bg-slate-50 rounded-lg flex items-center justify-center space-x-3",children:[(0,a.jsx)(g.A,{className:"h-6 w-6"}),(0,a.jsx)("span",{children:"Voice Only"})]})]}),(0,a.jsx)("p",{className:"text-sm text-slate-600 text-center",children:"Choose camera + voice to show your face, or voice only for audio explanation"})]})})});if("requesting"===P)return(0,a.jsx)("div",{className:"flex flex-col items-center justify-center h-screen bg-slate-50 p-4 overflow-hidden",children:(0,a.jsx)(h,{className:"w-full max-w-md",children:(0,a.jsxs)(u,{className:"p-6 text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-slate-900",children:"Requesting Camera Access"}),(0,a.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-purple-600 border-t-transparent rounded-full mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Please allow camera access when prompted"})]})})});if("loading"===P)return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen bg-slate-50 p-4 overflow-hidden",children:[(0,a.jsx)("video",{ref:q,autoPlay:!0,playsInline:!0,muted:!0,style:{display:"none"}}),(0,a.jsx)(h,{className:"w-full max-w-md",children:(0,a.jsxs)(u,{className:"p-6 text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-slate-900",children:"Starting Camera"}),(0,a.jsx)("div",{className:"animate-pulse h-8 w-8 bg-purple-600 rounded-full mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-600 mb-4",children:"Camera is starting up..."}),(0,a.jsx)(m,{onClick:()=>{console.log("\uD83C\uDFA5 Emergency skip - forcing ready state"),S("ready")},variant:"outline",className:"mt-4 text-sm",children:"Skip (if stuck)"})]})})]});if("denied"===P){let e="https:"===location.protocol||"localhost"===location.hostname,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return(0,a.jsx)("div",{className:"flex flex-col items-center justify-center h-screen bg-slate-50 p-4 overflow-hidden",children:(0,a.jsx)(h,{className:"w-full max-w-md",children:(0,a.jsxs)(u,{className:"p-6 text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-slate-900",children:"Camera Access Issue"}),!e&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-red-800",children:[(0,a.jsx)("strong",{children:"Security Issue:"})," Camera requires HTTPS on mobile devices. This site is using HTTP which blocks camera access."]})}),t&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,a.jsx)("strong",{children:"Mobile Tips:"}),(0,a.jsx)("br",{}),"• Make sure camera permission is enabled",(0,a.jsx)("br",{}),"• Try refreshing the page",(0,a.jsx)("br",{}),"• Check if other apps are using the camera",(0,a.jsx)("br",{}),!e&&"• Use HTTPS version of this site"]})}),(0,a.jsx)("p",{className:"text-slate-600 mb-6",children:"You can still record with voice only"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(m,{onClick:ee,className:"w-full py-3 bg-green-600 hover:bg-green-700 text-white",children:[(0,a.jsx)(g.A,{className:"mr-2 h-5 w-5"}),"Continue with Voice Only"]}),(0,a.jsx)(m,{onClick:()=>R(!0),variant:"outline",className:"w-full py-2",children:"Try Camera Again"})]})]})})})}return D?(0,a.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-50 p-4",children:(0,a.jsx)(h,{className:"w-full max-w-md",children:(0,a.jsxs)(u,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-center mb-6 text-slate-900",children:"Ready to Record!"}),(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold",children:"1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-blue-900",children:"Start Screen Recording"}),(0,a.jsx)("p",{className:"text-sm text-blue-700",children:"Open Control Center → Screen Recording"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-green-600 text-white rounded-full flex items-center justify-center font-bold",children:"2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-green-900",children:"Come Back to This App"}),(0,a.jsx)("p",{className:"text-sm text-green-700",children:"Switch back when recording starts"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-purple-50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold",children:"3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-purple-900",children:'Click "I\'m Ready"'}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"Start revealing your math problem"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(m,{onClick:el,className:"w-full py-3 text-lg bg-purple-600 hover:bg-purple-700 text-white",children:"I'm Ready - Start Revealing!"}),(0,a.jsx)(m,{onClick:()=>E(!1),variant:"outline",className:"w-full py-2",children:"Cancel"})]})]})})}):(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,a.jsx)("canvas",{ref:J,style:{display:"none"}}),0===e.length&&(0,a.jsx)("div",{className:"flex flex-col items-center justify-center h-screen p-4 overflow-hidden",children:(0,a.jsx)(h,{className:"w-full max-w-md",children:(0,a.jsxs)(u,{className:"p-6 text-center",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(p.A,{className:"h-8 w-8 text-white"})}),(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2 text-slate-800",children:"Math Fast APP"}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:"For best YouTube Shorts results, use portrait images (9:16 ratio)"})]}),M&&(0,a.jsxs)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-red-800 mb-3",children:M}),(0,a.jsxs)("div",{className:"flex gap-2 justify-center",children:[I<3&&(0,a.jsxs)(m,{onClick:ei,variant:"outline",size:"sm",className:"border-red-300 text-red-700 hover:bg-red-50",children:["Try Again (",3-I," left)"]}),(0,a.jsx)(m,{onClick:()=>T(null),variant:"outline",size:"sm",children:"Dismiss"})]})]}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:$,className:"hidden",id:"image-upload",ref:Y,multiple:!0}),(0,a.jsx)(m,{onClick:()=>{var e;return null===(e=Y.current)||void 0===e?void 0:e.click()},disabled:C,className:"w-full py-3 text-lg bg-purple-600 hover:bg-purple-700 text-white",children:C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full mr-2"}),"Processing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.A,{className:"mr-2 h-5 w-5"}),"Upload Images"]})}),(0,a.jsxs)("div",{className:"mt-4 flex justify-center space-x-4 text-xs text-slate-500",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(f.A,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)("span",{children:"Portrait: Best"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(b.A,{className:"h-4 w-4 text-yellow-600"}),(0,a.jsx)("span",{children:"Square: Good"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 text-red-600"}),(0,a.jsx)("span",{children:"Landscape: Poor"})]})]})]})})}),ed&&(0,a.jsxs)("div",{className:"flex flex-col overflow-hidden bg-slate-50",style:{height:U||"100vh",paddingTop:"".concat(L.top,"px"),paddingBottom:"".concat(L.bottom,"px")},children:[(0,a.jsxs)("div",{className:"flex-shrink-0 py-2 px-4 text-center bg-white shadow-sm relative",style:{height:"".concat(Math.max(48,12+L.top),"px")},children:[(0,a.jsx)("h1",{className:"text-lg font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Math Fast APP"}),(0,a.jsx)(m,{onClick:eo,variant:"ghost",size:"icon",className:"absolute top-1 right-2 h-8 w-8 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 z-50",children:(0,a.jsx)(w.A,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"flex items-center justify-center px-3 py-1",style:{height:"".concat(U-Math.max(48,12+L.top)-Math.max(72,20+L.bottom),"px")},children:(0,a.jsx)("div",{className:"relative w-full max-w-sm mx-auto h-full",children:(0,a.jsxs)("div",{className:"relative w-full bg-white rounded-xl overflow-hidden shadow-lg h-full",style:{maxHeight:"100%",minHeight:"".concat(Math.min(400,.5*(U||800)),"px")},children:[(0,a.jsx)("img",{src:ed,alt:"Math problem",className:"absolute inset-0 w-full h-full object-contain bg-white",ref:G,style:{transform:"translateZ(0)",backfaceVisibility:"hidden"}}),C&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 text-white z-20",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin h-6 w-6 border-2 border-white border-t-transparent rounded-full mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm",children:"Analyzing..."})]})}),M&&!C&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-red-900/80 text-white z-20",children:(0,a.jsxs)("div",{className:"text-center p-4",children:[(0,a.jsx)("p",{className:"font-semibold mb-3 text-sm",children:"Processing Failed"}),(0,a.jsxs)("div",{className:"flex gap-2 justify-center",children:[I<3&&(0,a.jsx)(m,{onClick:ei,size:"sm",className:"bg-white text-red-900 hover:bg-gray-100 text-xs",children:"Retry"}),(0,a.jsx)(m,{onClick:eo,variant:"outline",size:"sm",className:"border-white text-white hover:bg-white hover:text-red-900 text-xs",children:"Start Over"})]})]})}),V&&(0,a.jsx)("div",{className:"absolute inset-0 z-10 pointer-events-none",children:(0,a.jsx)("div",{className:"absolute bg-white transition-all duration-700 ease-in-out",style:{left:0,top:"".concat(ec()/V.height*100,"%"),width:"100%",height:"".concat(100-ec()/V.height*100,"%")}})})]})})}),"ready"===P&&d&&(0,a.jsxs)("div",{className:"absolute top-14 right-4 w-16 h-16 bg-black rounded-full overflow-hidden border-2 border-white shadow-lg z-30",children:[(0,a.jsx)("video",{ref:W,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover transform scale-x-[-1]"}),(0,a.jsx)(m,{variant:"ghost",size:"icon",onClick:es,className:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-red-500 text-white hover:bg-red-600 p-0",children:(0,a.jsx)(w.A,{className:"h-3 w-3"})})]}),"audio-only"===P&&(0,a.jsx)("div",{className:"absolute top-14 right-4 w-12 h-12 bg-green-600 rounded-full flex items-center justify-center border-2 border-white shadow-lg z-30",children:(0,a.jsx)(g.A,{className:"h-4 w-4 text-white"})}),(0,a.jsx)("div",{className:"flex-shrink-0 bg-white border-t border-slate-200 py-2",style:{height:"".concat(Math.max(72,20+L.bottom),"px")},children:(0,a.jsxs)("div",{className:"flex items-center justify-center h-full px-4",children:[0===i&&n.length>0&&!C&&"none"===P&&(0,a.jsxs)(m,{onClick:ea,className:"bg-purple-600 hover:bg-purple-700 text-white shadow-lg px-4 py-2",children:[(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Start Recording"]}),("ready"===P||"audio-only"===P)&&0===i&&(0,a.jsx)(m,{onClick:()=>c(1),className:"bg-purple-600 hover:bg-purple-700 text-white shadow-lg px-4 py-2",children:"Start Revealing"}),i>0&&("ready"===P||"audio-only"===P)&&(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(m,{onClick:en,disabled:i<=1&&s<=0,variant:"outline",className:"bg-white hover:bg-slate-50 shadow-lg border-slate-300 px-3 py-2",children:(0,a.jsx)(j.A,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"px-3 py-2 bg-slate-100 rounded-lg text-sm font-medium text-slate-700 min-w-[50px] text-center",children:[i,"/",n.length]}),(0,a.jsx)(m,{onClick:er,disabled:i>=n.length&&s>=e.length-1,variant:"outline",className:"bg-white hover:bg-slate-50 shadow-lg border-slate-300 px-3 py-2",children:(0,a.jsx)(y.A,{className:"h-4 w-4"})})]})]})})]})]})}},9044:(e,t,s)=>{Promise.resolve().then(s.bind(s,3644))}},e=>{var t=t=>e(e.s=t);e.O(0,[591,441,684,358],()=>t(9044)),_N_E=e.O()}]);